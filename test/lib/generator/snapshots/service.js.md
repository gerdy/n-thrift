# Snapshot report for `test/lib/generator/service.js`

The actual snapshot is saved in `service.js.snap`.

Generated by [AVA](https://ava.li).

## clientGenerator

> Snapshot 1

    `export class TestClient extends Client {␊
    ␊
      testVoid() {␊
        const args = new Test$testVoid$Args({  });␊
        return this.send('testVoid', args).then(input => {␊
          const result = new Test$testVoid$Result();␊
          result.read(input);␊
          input.readMessageEnd();␊
        }).catch(input => {␊
          const error = new Thrift.TApplicationException();␊
          error.read(input);␊
          input.readMessageEnd();␊
          return Promise.reject(error);␊
        });␊
      }␊
    ␊
      testString(my_age) {␊
        const args = new Test$testString$Args({ my_age });␊
        return this.send('testString', args).then(input => {␊
          const result = new Test$testString$Result();␊
          result.read(input);␊
          input.readMessageEnd();␊
          if (result.success !== null) {␊
            return result.success;␊
          }␊
          return Promise.reject(new Error('"Test.testString" request failed: unknown result'));␊
        }).catch(input => {␊
          const error = new Thrift.TApplicationException();␊
          error.read(input);␊
          input.readMessageEnd();␊
          return Promise.reject(error);␊
        });␊
      }␊
    ␊
      testString2(my_age, my_Name) {␊
        const args = new Test$testString2$Args({ my_age, my_Name });␊
        return this.send('testString2', args).then(input => {␊
          const result = new Test$testString2$Result();␊
          result.read(input);␊
          input.readMessageEnd();␊
          if (result.success !== null) {␊
            return result.success;␊
          }␊
          return Promise.reject(new Error('"Test.testString2" request failed: unknown result'));␊
        }).catch(input => {␊
          const error = new Thrift.TApplicationException();␊
          error.read(input);␊
          input.readMessageEnd();␊
          return Promise.reject(error);␊
        });␊
      }␊
    }␊
    ␊
    ␊
    `

> Snapshot 2

    `class LegacyTestClient extends BaseClient {␊
    ␊
      testVoid() {␊
        const args = new LegacyTest$testVoid$Args({  });␊
        return this.send('testVoid', args).then(input => {␊
          const result = new LegacyTest$testVoid$Result();␊
          result.read(input);␊
          input.readMessageEnd();␊
        }).catch(input => {␊
          const error = new Thrift.TApplicationException();␊
          error.read(input);␊
          input.readMessageEnd();␊
          return Promise.reject(error);␊
        });␊
      }␊
    ␊
      testString(my_age) {␊
        const args = new LegacyTest$testString$Args({ my_age });␊
        return this.send('testString', args).then(input => {␊
          const result = new LegacyTest$testString$Result();␊
          result.read(input);␊
          input.readMessageEnd();␊
          if (result.success !== null) {␊
            return result.success;␊
          }␊
          return Promise.reject(new Error('"LegacyTest.testString" request failed: unknown result'));␊
        }).catch(input => {␊
          const error = new Thrift.TApplicationException();␊
          error.read(input);␊
          input.readMessageEnd();␊
          return Promise.reject(error);␊
        });␊
      }␊
    ␊
      testString2(my_age, my_Name) {␊
        const args = new LegacyTest$testString2$Args({ my_age, my_Name });␊
        return this.send('testString2', args).then(input => {␊
          const result = new LegacyTest$testString2$Result();␊
          result.read(input);␊
          input.readMessageEnd();␊
          if (result.success !== null) {␊
            return result.success;␊
          }␊
          return Promise.reject(new Error('"LegacyTest.testString2" request failed: unknown result'));␊
        }).catch(input => {␊
          const error = new Thrift.TApplicationException();␊
          error.read(input);␊
          input.readMessageEnd();␊
          return Promise.reject(error);␊
        });␊
      }␊
    }␊
    ␊
    exports.LegacyTestClient = LegacyTestClient␊
    exports.Client = LegacyTestClient;␊
    `

## resultGenerator

> Snapshot 1

    `let MyTest$testMultiException$Result$TypeCache = null;␊
    const MyTest$testMultiException$Result$success = Symbol('success');␊
    const MyTest$testMultiException$Result$err1 = Symbol('err1');␊
    const MyTest$testMultiException$Result$err2 = Symbol('err2');␊
    const MyTest$testMultiException$Result$err2 = Symbol('err2');␊
    export class MyTest$testMultiException$Result extends Struct {␊
      constructor(argument) {␊
        super();␊
    ␊
        this[MyTest$testMultiException$Result$success] = null;␊
        this[MyTest$testMultiException$Result$err1] = null;␊
        this[MyTest$testMultiException$Result$err2] = null;␊
        this[MyTest$testMultiException$Result$err2] = null;␊
    ␊
        if (argument) {␊
          if(argument instanceof Xception) {␊
            this.err1 = argument;␊
            return;␊
          }␊
          if(argument instanceof Xception2) {␊
            this.err2 = argument;␊
            return;␊
          }␊
          if(argument instanceof Xception2) {␊
            this.err2 = argument;␊
            return;␊
          }␊
          this.success = argument; ␊
        }␊
      }␊
    ␊
      static get Types() {␊
        if(MyTest$testMultiException$Result$TypeCache) return MyTest$testMultiException$Result$TypeCache;␊
        MyTest$testMultiException$Result$TypeCache = new Map();␊
        MyTest$testMultiException$Result$TypeCache.set(0, { name: 'success', customName: 'success', type: { name: 'map', keyType: 'i32', valueType: { name: 'list', type: Numbers } } });␊
        MyTest$testMultiException$Result$TypeCache.set(1, { name: 'err1', customName: 'err1', type: Xception });␊
        MyTest$testMultiException$Result$TypeCache.set(2, { name: 'err2', customName: 'err2', type: Xception2 });␊
        MyTest$testMultiException$Result$TypeCache.set(3, { name: 'err2', customName: 'err2', type: Xception2 });␊
        return MyTest$testMultiException$Result$TypeCache;␊
      }␊
    ␊
      get success() { return this[MyTest$testMultiException$Result$success]; }␊
      set success(val) {␊
        if(val !== undefined) {␊
          this[$success] = new TMap(val, 'i32', { name: 'list', type: Numbers });␊
      }␊
    ␊
      get err1() { return this[MyTest$testMultiException$Result$err1]; }␊
      set err1(val) {␊
        if(val !== undefined) {␊
          if(val instanceof Xception) {␊
            this[$err1] = val;␊
          } else {␊
            this[$err1] = new Xception(val);␊
          }␊
        }␊
      }␊
    ␊
      get err2() { return this[MyTest$testMultiException$Result$err2]; }␊
      set err2(val) {␊
        if(val !== undefined) {␊
          if(val instanceof Xception2) {␊
            this[$err2] = val;␊
          } else {␊
            this[$err2] = new Xception2(val);␊
          }␊
        }␊
      }␊
    ␊
      get err2() { return this[MyTest$testMultiException$Result$err2]; }␊
      set err2(val) {␊
        if(val !== undefined) {␊
          if(val instanceof Xception2) {␊
            this[$err2] = val;␊
          } else {␊
            this[$err2] = new Xception2(val);␊
          }␊
        }␊
      }␊
    }␊
    `

> Snapshot 2

    `let MyTest$testMultiException$Result$TypeCache = null;␊
    const MyTest$testMultiException$Result$success = Symbol('success');␊
    class MyTest$testMultiException$Result extends Struct {␊
      constructor(argument) {␊
        super();␊
    ␊
        this[MyTest$testMultiException$Result$success] = null;␊
    ␊
        if (argument) {␊
          this.success = argument; ␊
        }␊
      }␊
    ␊
      static get Types() {␊
        if(MyTest$testMultiException$Result$TypeCache) return MyTest$testMultiException$Result$TypeCache;␊
        MyTest$testMultiException$Result$TypeCache = new Map();␊
        MyTest$testMultiException$Result$TypeCache.set(0, { name: 'success', customName: 'success', type: 'string' });␊
        return MyTest$testMultiException$Result$TypeCache;␊
      }␊
    ␊
      get success() { return this[MyTest$testMultiException$Result$success]; }␊
      set success(val) {␊
        if(val !== undefined) {␊
          this[$success] = val;␊
      }␊
    }␊
    exports.MyTest$testMultiException$Result = MyTest$testMultiException$Result;␊
    `

> Snapshot 3

    `let MyTest$testMultiException$Result$TypeCache = null;␊
    const MyTest$testMultiException$Result$err1 = Symbol('err1');␊
    class MyTest$testMultiException$Result extends Struct {␊
      constructor(argument) {␊
        super();␊
    ␊
        this[MyTest$testMultiException$Result$err1] = null;␊
    ␊
        if (argument) {␊
          if(argument instanceof Xception) {␊
            this.err1 = argument;␊
            return;␊
          }␊
        }␊
      }␊
    ␊
      static get Types() {␊
        if(MyTest$testMultiException$Result$TypeCache) return MyTest$testMultiException$Result$TypeCache;␊
        MyTest$testMultiException$Result$TypeCache = new Map();␊
        MyTest$testMultiException$Result$TypeCache.set(1, { name: 'err1', customName: 'err1', type: Xception });␊
        return MyTest$testMultiException$Result$TypeCache;␊
      }␊
    ␊
      get err1() { return this[MyTest$testMultiException$Result$err1]; }␊
      set err1(val) {␊
        if(val !== undefined) {␊
          if(val instanceof Xception) {␊
            this[$err1] = val;␊
          } else {␊
            this[$err1] = new Xception(val);␊
          }␊
        }␊
      }␊
    }␊
    exports.MyTest$testMultiException$Result = MyTest$testMultiException$Result;␊
    `

> Snapshot 4

    `let MyTest$testMultiException$Result$TypeCache = null;␊
    const MyTest$testMultiException$Result$success = Symbol('success');␊
    class MyTest$testMultiException$Result extends Struct {␊
      constructor(argument) {␊
        super();␊
    ␊
        this[MyTest$testMultiException$Result$success] = null;␊
    ␊
        if (argument) {␊
          this.success = argument; ␊
        }␊
      }␊
    ␊
      static get Types() {␊
        if(MyTest$testMultiException$Result$TypeCache) return MyTest$testMultiException$Result$TypeCache;␊
        MyTest$testMultiException$Result$TypeCache = new Map();␊
        MyTest$testMultiException$Result$TypeCache.set(0, { name: 'success', customName: 'success', type: { name: 'set', type: 'string' } });␊
        return MyTest$testMultiException$Result$TypeCache;␊
      }␊
    ␊
      get success() { return this[MyTest$testMultiException$Result$success]; }␊
      set success(val) {␊
        if(val !== undefined) {␊
          this[$success] = new TSet(val, 'string');␊
      }␊
    }␊
    exports.MyTest$testMultiException$Result = MyTest$testMultiException$Result;␊
    `

## serverGenerator

> Snapshot 1

    `let Test$TypeCache = null;␊
    export class TestServer extends Server {␊
      constructor() {␊
        super(false);␊
      }␊
    ␊
      static get Types() {␊
        if(Test$TypeCache) return Test$TypeCache;␊
        Test$TypeCache = new Map();␊
        Test$TypeCache.set('testVoid', {␊
          customName: testVoid,␊
          argumentType: Test$testVoid$Args,␊
          resultType: Test$testVoid$Result,␊
          oneway: false␊
        });␊
        Test$TypeCache.set('testString', {␊
          customName: testString,␊
          argumentType: Test$testString$Args,␊
          resultType: Test$testString$Result,␊
          oneway: true␊
        });␊
        Test$TypeCache.set('testString2', {␊
          customName: testString2,␊
          argumentType: Test$testString2$Args,␊
          resultType: Test$testString2$Result,␊
          oneway: true␊
        });␊
        return Test$TypeCache;␊
      }␊
    ␊
      testVoid() {␊
        throw new Error('"Test.testVoid" is not implemented');␊
      }␊
    ␊
      testString(my_age) {␊
        throw new Error('"Test.testString" is not implemented');␊
      }␊
    ␊
      testString2(my_age, my_Name) {␊
        throw new Error('"Test.testString2" is not implemented');␊
      }␊
    }␊
    ␊
    `

> Snapshot 2

    `let LegacyTest$TypeCache = null;␊
    const LegacyTest$handler = Symbol('handler');␊
    class LegacyTestServer extends BaseServer {␊
      constructor(handler) {␊
        super(true);␊
        this[$handler] = handler || {};␊
      }␊
    ␊
      static get Types() {␊
        if(LegacyTest$TypeCache) return LegacyTest$TypeCache;␊
        LegacyTest$TypeCache = new Map();␊
        LegacyTest$TypeCache.set('testVoid', {␊
          customName: testVoid,␊
          argumentType: LegacyTest$testVoid$Args,␊
          resultType: LegacyTest$testVoid$Result,␊
          oneway: false␊
        });␊
        LegacyTest$TypeCache.set('testString', {␊
          customName: testString,␊
          argumentType: LegacyTest$testString$Args,␊
          resultType: LegacyTest$testString$Result,␊
          oneway: true␊
        });␊
        LegacyTest$TypeCache.set('testString2', {␊
          customName: testString2,␊
          argumentType: LegacyTest$testString2$Args,␊
          resultType: LegacyTest$testString2$Result,␊
          oneway: true␊
        });␊
        return LegacyTest$TypeCache;␊
      }␊
    ␊
      testVoid() {␊
        if (typeof this[LegacyTest$handler].testVoid !== 'function') {␊
          throw new Error('"LegacyTest.testVoid" is not implemented');␊
        }␊
        return new Promise((resolve, reject) => {␊
          this[LegacyTest$handler].testVoid((error, result) => {␊
            if (error) return reject(error);␊
            return resolve(result);␊
          });␊
        });␊
      }␊
    ␊
      testString(my_age) {␊
        if (typeof this[LegacyTest$handler].testString !== 'function') {␊
          throw new Error('"LegacyTest.testString" is not implemented');␊
        }␊
        return new Promise((resolve, reject) => {␊
          this[LegacyTest$handler].testString(my_age, (error, result) => {␊
            if (error) return reject(error);␊
            return resolve(result);␊
          });␊
        });␊
      }␊
    ␊
      testString2(my_age, my_Name) {␊
        if (typeof this[LegacyTest$handler].testString2 !== 'function') {␊
          throw new Error('"LegacyTest.testString2" is not implemented');␊
        }␊
        return new Promise((resolve, reject) => {␊
          this[LegacyTest$handler].testString2(my_age, my_Name, (error, result) => {␊
            if (error) return reject(error);␊
            return resolve(result);␊
          });␊
        });␊
      }␊
    }␊
    exports.LegacyTestServer = LegacyTestServer␊
    exports.Processor = LegacyTestServer;␊
    `
